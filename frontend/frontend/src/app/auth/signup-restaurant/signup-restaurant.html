<main>
    <section class="card">
        <h1>Restaurant Details</h1>

        <form #f="ngForm" (ngSubmit)="onSubmit(f)" novalidate>
            <div class="row">
                <label for="restaurant_name">Restaurant Name</label>
                <input id="restaurant_name" name="restaurant_name" type="text" [(ngModel)]="model.name" required />
            </div>

            <div class="row">
                <label for="restaurant_address">Restaurant Address</label>
                <input id="restaurant_address" name="restaurant_address" type="text" [(ngModel)]="model.address"
                    required />
            </div>

            <div class="row">
                <label for="region">Region</label>
                <select id="region" name="region" [(ngModel)]="model.regionId">
                    <option [ngValue]="null" disabled selected hidden>Select Region</option>
                    <option *ngFor="let r of regions" [ngValue]="r.id">{{ r.name }}</option>
                </select>
            </div>

            <div class="row">
                <label for="imageUrl">Image URL</label>
                <div class="input-with-upload">
                    <input id="imageUrl" name="imageUrl" type="text" [(ngModel)]="model.imageUrl" required />
                    <button type="button" class="upload-btn" (click)="showUpload = true"
                        title="Upload Image">Upload</button>
                </div>
            </div>

            <app-image-upload-overlay *ngIf="showUpload" (closed)="showUpload = false"
                (uploaded)="model.imageUrl = $event; showUpload = false">
            </app-image-upload-overlay>

            <p *ngIf="error" class="error">{{ error }}</p>

            <button type="submit" [disabled]="f.invalid || loading">{{ loading ? 'Please wait...' : 'Finish' }}</button>

            <a routerLink="/auth/login">Back to login</a>
        </form>
    </section>
</main>